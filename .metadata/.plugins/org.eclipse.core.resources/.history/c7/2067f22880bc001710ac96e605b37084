package view.grain.input;

import javafx.beans.binding.Bindings;
import javafx.beans.binding.BooleanBinding;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;
import javafx.scene.image.Image;
import javafx.scene.layout.Pane;
import javafx.scene.text.Text;
import javafx.stage.Stage;

/**
 * EditGrainWindow.java
 * 
 * Purpose: 
**/

public class EditGrainWindow extends Stage
{
	// Labels
	private static final String EDIT_GRAIN_TITLE = "Edit a Grain";
	private static final String LENGTH_PROMPT         = "Enter Length";
	private static final String OUTER_DIAMETER_PROMPT = "Enter Outer Diameter";
	private static final String INNER_DIAMETER_PROMPT = "Enter Inner Diameter";
	private static final String BURNING_ENDS_PROMPT   = "Enter Number of Burning Ends";
	private static final String SUBMIT_BUTTON_TEXT = "Submit";
	private static final String EMPTY = "";
	private static final String ICON_FILE_PATH = "./../../../images/OpenBurnLogo_1.png";
	
	
	
	// Constants
	private static final int WINDOW_WIDTH  = 450;
	private static final int WINDOW_HEIGHT = 270;
	
	
	
	// Components
	private Text lengthText;
	private Text outerDiameterText;
	private Text burningEndsText;
	private Text innerDiameterText;
	private TextField lengthTextField;
	private TextField outerDiameterTextField;
	private TextField burningEndsTextField;
	private TextField innerDiameterTextField;
	private Button submitButton;
	
	
	
	// Fields
	BooleanBinding lengthTextFieldNotValid;
	
	
	
	/**
	 * EditGrainWindow Constructor
	 * 
	 * Purpose: 
	**/
	
	public EditGrainWindow ()
	{
		// Invoke Pane super constructor
		super();
		
		// Initialize window
		this.getIcons().add(new Image(this.getClass().getResourceAsStream(ICON_FILE_PATH)));
		this.setTitle(EDIT_GRAIN_TITLE);
		this.setResizable(false);
		Pane editPane = new Pane();
        Scene editScene = new Scene(editPane, WINDOW_WIDTH, WINDOW_HEIGHT);
        editScene.setRoot(editPane);
        this.setScene(editScene);
		
        // Add components
        addLengthInput(editPane);
        addOuterDiameterInput(editPane);
        addBurningEndsInput(editPane);
		addInnerDiameterInput(editPane);
		addSubmitButton(editPane);
	} // EditGrainWindow Constructor
	
	
	
	/**
	 * addLengthInput()
	 * 
	 * Purpose:
	 * 
	 * Parameters:
	 * 
	 * Returns:
	**/
	
	private void addLengthInput (Pane frame)
	{
		lengthText = new Text(LENGTH_PROMPT);
    	lengthText.setTranslateX(25);
    	lengthText.setTranslateY(40);
    	frame.getChildren().add(lengthText);
    	
    	lengthTextField = new TextField();
    	lengthTextField.setTranslateX(25);
    	lengthTextField.setTranslateY(50);
		frame.getChildren().add(lengthTextField);
		
		BooleanBinding lengthTextFieldNotValid = Bindings.createBooleanBinding(() ->
		{
    	    return lengthTextField.getText().equals(EMPTY);
    	}, lengthTextField.textProperty());
	} // addLengthInput()
	
	
	
	/**
	 * 
	**/
	
	private void addOuterDiameterInput (Pane frame)
	{
		outerDiameterText = new Text(OUTER_DIAMETER_PROMPT);
		outerDiameterText.setTranslateX(25);
    	outerDiameterText.setTranslateY(130);
		frame.getChildren().add(outerDiameterText);
		
		outerDiameterTextField = new TextField();
		outerDiameterTextField.setTranslateX(25);
    	outerDiameterTextField.setTranslateY(140);
    	frame.getChildren().add(outerDiameterTextField);
		
		BooleanBinding outerDiameterTextFieldNotValid = Bindings.createBooleanBinding(() -> {
    	    return outerDiameterTextField.getText().equals(EMPTY);
    	}, outerDiameterTextField.textProperty());
	} // addOuterDiameterInput()
	
	
	
	/**
	 * 
	**/
	
	private void addBurningEndsInput (Pane frame)
	{
		burningEndsText = new Text(BURNING_ENDS_PROMPT);
		burningEndsText.setTranslateX(235);
    	burningEndsText.setTranslateY(40);
		frame.getChildren().add(burningEndsText);
		
		burningEndsTextField = new TextField();
		burningEndsTextField.setTranslateX(235);
    	burningEndsTextField.setTranslateY(50);
		frame.getChildren().add(burningEndsTextField);
		
		BooleanBinding burningEndsTextFieldNotValid = Bindings.createBooleanBinding(() -> {
    	    return burningEndsTextField.getText().equals(EMPTY);
    	}, burningEndsTextField.textProperty());
	} // addBurningEndsInput()
	
	
	
	/**
	 * 
	**/
	
	private void addInnerDiameterInput (Pane frame)
	{
		innerDiameterText = new Text(INNER_DIAMETER_PROMPT);
		innerDiameterText.setTranslateX(235);
    	innerDiameterText.setTranslateY(130);
		frame.getChildren().add(innerDiameterText);
		
		innerDiameterTextField = new TextField();
		innerDiameterTextField.setTranslateX(235);
    	innerDiameterTextField.setTranslateY(140);
		frame.getChildren().add(innerDiameterTextField);
		
		BooleanBinding innerDiameterTextFieldNotValid = Bindings.createBooleanBinding(() -> {
    	    return innerDiameterTextField.getText().equals(EMPTY);
    	}, innerDiameterTextField.textProperty());
		
	} // addInnerDiameterInput()
	
	
	
	/**
	 * 
	**/
	
	private void addSubmitButton (Pane frame)
	{
		submitButton = new Button(SUBMIT_BUTTON_TEXT);
		submitButton.setTranslateX(155);
    	submitButton.setTranslateY(200);
    	submitButton.setPrefWidth(130);
    	submitButton.setPrefHeight(35);
    	frame.getChildren().add(submitButton);
    	
    	//submitButton.disableProperty().bind((lengthTextFieldNotValid.or(outerDiameterTextFieldNotValid).or(burningEndsTextFieldNotValid).or(innerDiameterTextFieldNotValid)));
	} // addSubmitButton()
	
} // class EditGrainWindow
